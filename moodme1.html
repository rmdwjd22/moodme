// í™•ì¥ëœ ë²„ì „: ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ + ì•Œë¦¼, ì˜¤ëŠ˜ì˜ ê°ì • ìš”ì•½, ì €ì¥ ì—¬ë¶€ ê²½ê³ , UI ì„¸ë¶€ ê°œì„  ë“± í¬í•¨
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MoodMe - ê°ì • ê¸°ë¡ ì•±</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --main-bg: linear-gradient(to bottom, #ffe6f0, #ffffff);
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--main-bg);
      margin: 0;
      padding: 20px;
      color: #333;
    }
    header {
      text-align: center;
      padding: 20px 0;
    }
    h1 {
      color: #ff4f87;
      font-size: 2.5rem;
      margin: 0;
    }
    .subtitle {
      color: #666;
      margin-top: 8px;
      font-size: 1rem;
    }
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      max-width: 350px;
      margin: 30px auto;
      padding: 15px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }
    .emoji {
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .emoji:hover {
      transform: scale(1.3);
    }
    .emoji-label {
      font-size: 0.9rem;
      color: #666;
    }
    .emoji-box {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #message-box {
      margin: 30px auto;
      font-size: 1.2rem;
      color: #444;
      min-height: 60px;
      max-width: 400px;
      background: #fff7fa;
      padding: 15px;
      border-left: 5px solid #ff88a1;
      border-radius: 10px;
    }
    .log, .chart-container, .content-box, .summary-box {
      margin-top: 40px;
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .log h3, .chart-container h3, .content-box h3, .summary-box h3 {
      color: #ff4f87;
      margin-bottom: 15px;
    }
    .log-item {
      font-size: 0.95rem;
      color: #555;
      margin: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .log-item button {
      font-size: 0.8rem;
      padding: 3px 8px;
      background: #eee;
      color: #ff4f87;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .log-item button:hover {
      background: #ffcbd7;
    }
    .note-input {
      margin-top: 15px;
      text-align: center;
    }
    input[type="text"] {
      width: 80%;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    button {
      margin-top: 10px;
      background: #ff4f87;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    button:hover {
      background: #e63f76;
    }
    .theme-switcher {
      text-align: center;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <header>
    <h1>MoodMe</h1>
    <p class="subtitle">ë‚˜ì˜ ê°ì •ì„ ë§¤ì¼ ê¸°ë¡í•˜ê³  ê³µê°ë°›ëŠ” ì‹œê°„ âœ¨</p>
  </header>

  <div class="emoji-grid" id="emoji-grid"></div>

  <div class="note-input">
    <input type="text" id="note" placeholder="ê°ì •ì— ëŒ€í•œ ë©”ëª¨ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”...">
    <br/>
    <button onclick="saveNote()">ê¸°ë¡í•˜ê¸°</button>
  </div>

  <div id="message-box"></div>

  <div class="log">
    <h3>ë‚´ ê°ì • ê¸°ë¡</h3>
    <div id="log-list"></div>
  </div>

  <div class="chart-container">
    <h3>ê°ì • í†µê³„</h3>
    <canvas id="moodChart"></canvas>
  </div>

  <div class="summary-box">
    <h3>ì˜¤ëŠ˜ì˜ ê°ì • ìš”ì•½ ğŸ—“ï¸</h3>
    <div id="daily-summary">ì˜¤ëŠ˜ ì•„ì§ ê°ì •ì´ ê¸°ë¡ë˜ì§€ ì•Šì•˜ì–´ìš”.</div>
  </div>

  <div class="content-box">
    <h3>ì¶”ì²œ ì½˜í…ì¸  ğŸµğŸ“–ğŸ¬</h3>
    <div id="recommendation"></div>
  </div>

  <div class="theme-switcher">
    <p>ë°°ê²½ í…Œë§ˆ ì„ íƒ:</p>
    <button onclick="changeTheme('pink')">í•‘í¬</button>
    <button onclick="changeTheme('blue')">ë¸”ë£¨</button>
    <button onclick="changeTheme('mint')">ë¯¼íŠ¸</button>
    <button onclick="changeTheme('lavender')">ë¼ë²¤ë”</button>
    <button onclick="changeTheme('peach')">í”¼ì¹˜</button>
    <button onclick="changeTheme('sky')">ìŠ¤ì¹´ì´ë¸”ë£¨</button>
  </div>

  <script>
    const moods = [
      { emoji: 'ğŸ˜Š', label: 'í–‰ë³µ' },
      { emoji: 'ğŸ˜”', label: 'ìš°ìš¸' },
      { emoji: 'ğŸ˜¡', label: 'í™”ë‚¨' },
      { emoji: 'ğŸ˜­', label: 'ìŠ¬í””' },
      { emoji: 'ğŸ˜´', label: 'í”¼ê³¤' },
      { emoji: 'ğŸ˜ƒ', label: 'í™œê¸°ì°¸' },
      { emoji: 'ğŸ˜¢', label: 'ëˆˆë¬¼' },
      { emoji: 'ğŸ˜‡', label: 'í‰ì˜¨' },
      { emoji: 'ğŸ˜¶', label: 'ë¬´í‘œì •' },
      { emoji: 'ğŸ¤¯', label: 'í˜¼ë€' }
    ];

    const messages = {
      'ğŸ˜Š': 'í–‰ë³µí•œ í•˜ë£¨ ë³´ë‚´ì„¸ìš” ğŸ’›',
      'ğŸ˜”': 'ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ì˜í•˜ê³  ìˆì–´ìš”.',
      'ğŸ˜¡': 'ê°ì •ì„ ì–µëˆ„ë¥´ì§€ ë§ˆì„¸ìš”.',
      'ğŸ˜­': 'ìš¸ì–´ë„ ê´œì°®ì•„ìš”.',
      'ğŸ˜´': 'í‘¹ ì‰¬ì„¸ìš” ğŸŒ™',
      'ğŸ˜ƒ': 'ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ëŠê»´ì ¸ìš”!',
      'ğŸ˜¢': 'ìŠ¤ìŠ¤ë¡œë¥¼ ê¼­ ì•ˆì•„ì£¼ì„¸ìš”.',
      'ğŸ˜‡': 'í‰í™”ê°€ ì˜¤ë˜ ê°€ê¸¸ ë°”ë¼ìš”.',
      'ğŸ˜¶': 'ê°ì •ì„ í‘œí˜„í•˜ê¸° ì–´ë ¤ìš´ ë‚ ë„ ê´œì°®ì•„ìš”.',
      'ğŸ¤¯': 'ìˆ¨ í•œë²ˆ í¬ê²Œ ì‰¬ì–´ìš” ğŸ’¨'
    };

    const recommendations = {
      'ğŸ˜Š': 'ğŸµ BTS - Dynamite<br>ğŸ“– í–‰ë³µì€ ë‚´ê°€ ì„ íƒí•˜ëŠ” ê²ƒ<br>ğŸ¬ <a href="https://youtu.be/gdZLi9oWNZg" target="_blank">ê¸ì • ì—ë„ˆì§€</a>',
      'ğŸ˜”': 'ğŸµ Stay With Me<br>ğŸ“– í˜ë“  ë‚ ì—” ì‰¬ì–´ë„ ë¼<br>ğŸ¬ <a href="https://youtu.be/8ybW48rKBME" target="_blank">íë§ ì˜ìƒ</a>',
      'ğŸ˜¡': 'ğŸµ Numb<br>ğŸ“– ê°ì •ì„ í‘œí˜„í•˜ì„¸ìš”<br>ğŸ¬ <a href="https://youtu.be/ZpUYjpKg9KY" target="_blank">ë¶„ë…¸ í•´ì†Œ</a>',
      'ğŸ˜­': 'ğŸµ Someone Like You<br>ğŸ“– ëˆˆë¬¼ì€ í•´ë°©<br>ğŸ¬ <a href="https://youtu.be/Ri7-vnrJD3k" target="_blank">ê°ì„± ì˜ìƒ</a>',
      'ğŸ˜´': 'ğŸµ ë¡œíŒŒì´ ì¬ì¦ˆ<br>ğŸ“– ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´ìš”<br>ğŸ¬ <a href="https://youtu.be/5qap5aO4i9A" target="_blank">ìˆ˜ë©´ ì˜ìƒ</a>'
    };

    const log = [];
    const moodCounts = {};
    let currentMood = '';

    const emojiGrid = document.getElementById('emoji-grid');
    moods.forEach(m => {
      const box = document.createElement('div');
      box.className = 'emoji-box';
      box.innerHTML = `<div class="emoji" onclick="selectMood('${m.emoji}')">${m.emoji}</div><div class="emoji-label">${m.label}</div>`;
      emojiGrid.appendChild(box);
    });

    function selectMood(emoji) {
      currentMood = emoji;
      document.getElementById('message-box').textContent = messages[emoji] || 'ë‹¹ì‹ ì˜ ê°ì •ì„ ì´í•´í•´ìš”';
      document.getElementById('recommendation').innerHTML = recommendations[emoji] || '';
    }

    function saveNote() {
      if (!currentMood) return alert("ê°ì •ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.");
      const note = document.getElementById('note').value;
      const date = new Date().toLocaleString();
      const entry = { id: Date.now(), text: `${date} - ${currentMood} - ${note}`, emoji: currentMood };
      log.unshift(entry);
      moodCounts[currentMood] = (moodCounts[currentMood] || 0) + 1;
      updateLog();
      updateChart();
      updateSummary();
      document.getElementById('note').value = '';
      document.getElementById('message-box').textContent = '';
      document.getElementById('recommendation').innerHTML = '';
      currentMood = '';
    }

    function deleteLog(id, emoji) {
      const index = log.findIndex(e => e.id === id);
      if (index !== -1) {
        log.splice(index, 1);
        if (moodCounts[emoji] > 0) moodCounts[emoji]--;
        updateLog();
        updateChart();
        updateSummary();
      }
    }

    function updateLog() {
      document.getElementById('log-list').innerHTML = log.slice(0, 10).map(entry => 
        `<div class="log-item">${entry.text}<button onclick="deleteLog(${entry.id}, '${entry.emoji}')">ì‚­ì œ</button></div>`
      ).join('');
    }

    function updateSummary() {
      if (log.length > 0) {
        document.getElementById('daily-summary').textContent = `ì˜¤ëŠ˜ ì´ ${log.length}ê°œì˜ ê°ì •ì„ ê¸°ë¡í–ˆì–´ìš”.`;
      } else {
        document.getElementById('daily-summary').textContent = 'ì˜¤ëŠ˜ ì•„ì§ ê°ì •ì´ ê¸°ë¡ë˜ì§€ ì•Šì•˜ì–´ìš”.';
      }
    }

    function changeTheme(theme) {
      const colors = {
        pink: '#ffe6f0',
        blue: '#e6f0ff',
        mint: '#e6fff2',
        lavender: '#f3e8ff',
        peach: '#ffe5d9',
        sky: '#d0f0fd'
      };
      const color = colors[theme] || '#ffe6f0';
      document.documentElement.style.setProperty('--main-bg', `linear-gradient(to bottom, ${color}, #ffffff)`);
    }

    const ctx = document.getElementById('moodChart').getContext('2d');
    const moodChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: moods.map(m => m.label),
        datasets: [{
          label: 'ê°ì • ë¹„ìœ¨',
          data: [],
          backgroundColor: ['#FF9AA2','#FFB7B2','#FFDAC1','#E2F0CB','#B5EAD7','#C7CEEA','#AEC6CF','#D6CDEA','#FFD1DC','#E0BBE4']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });

    function updateChart() {
      moodChart.data.datasets[0].data = moods.map(m => moodCounts[m.emoji] || 0);
      moodChart.update();
    }
  </script>
</body>
</html>
